<!DOCTYPE html>
<html>

<head>
    <title>CSR List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #f3f3f3;
        }

        table {
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body>
    <div class="pb-4">
        <ul class="nav nav-tabs">
            <li class="nav-item" style="color: #f3f3f3;">
                <a class="nav-link navbar-brand text-dark" href="#">CSR Generator</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="{{ url_for('index')}}">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark active" href="{{ url_for('csr_list')}}">CSR List</a>
        </ul>
    </div>

    <div class="container">
        <table class="table table-striped table-hover table-sm">
            <thead>
                <tr>
                    <th>Request Name</th>
                    <th>Common Name</th>
                    <th>Environment</th>
                    <th>Date</th>
                    <th>CSR</th>
                    <th>CNF</th>
                    <th>Key</th>
                </tr>
            </thead>
            <tbody>
                {% for row in csr_data %}
                <tr>
                    <td>{{ row[1] }}</td>
                    <td>{{ row[2] }}</td>
                    <td>{{ row[3] }}</td>
                    <td>{{ row[4] }}</td>
                    <td>
                        <a href="{{ url_for('download_file', csr_id=row[0], type='csr') }}">
                            <button type="button" class="btn btn-success">
                                Download
                            </button>
                        </a>
                    </td>
                    <td>
                        <a href="{{ url_for('download_file', csr_id=row[0], type='cnf') }}">
                            <button type="button" class="btn btn-success">
                                Download
                            </button>
                        </a>
                    </td>
                    <td>
                        <a href="{{ url_for('generate_link', csr_id=row[0], type='key') }}">
                            <button type="button" class="btn btn-primary">
                                Generate
                            </button>
                        </a>
                    </td>
                    <td>
                        <a href="{{ url_for('delete_csr', csr_id=row[0]) }}">
                            <button type="button" class="btn btn-outline-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-trash" viewBox="0 0 16 16">
                                    <path
                                        d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z" />
                                    <path
                                        d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z" />
                                </svg>
                                Remove
                            </button>
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="container pagination d-flex justify-content-center">
        <nav aria-label="Page navigation">
            <ul class="pagination">
                {% if page > 1 %}
                <li class="page-item"><a class="page-link" href="{{ url_for('csr_list', page=1) }}">First</a></li>
                <li class="page-item"><a class="page-link" href="{{ url_for('csr_list', page=page-1) }}">Previous</a>
                </li>
                {% else %}
                <li class="disabled page-item"><a class="page-link" href="{{ url_for('csr_list', page=1) }}">First</a>
                </li>
                <li class="disabled page-item"><a class="page-link"
                        href="{{ url_for('csr_list', page=page-1) }}">Previous</a></li>
                {% endif %}
                <li class="page-item"><b class="page-link">{{ page_label}}</b></li>
                {% if page < total_pages %} <li class="page-item"><a class="page-link"
                        href="{{ url_for('csr_list', page=page+1) }}">Next</a></li>
                    <li class="page-item"><a class="page-link"
                            href="{{ url_for('csr_list', page=total_pages) }}">Last</a></li>
                    {% else %}
                    <li class="disabled page-item"><a class="page-link"
                            href="{{ url_for('csr_list', page=page+1) }}">Next</a></li>
                    <li class="disabled page-item"><a class="page-link"
                            href="{{ url_for('csr_list', page=total_pages) }}">Last</a></li>
                    {% endif %}

            </ul>
        </nav>
    </div>
</body>

</html>